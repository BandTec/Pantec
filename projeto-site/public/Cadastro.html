<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">

    <link rel="stylesheet" href="./CSS/Estilo_cadastro.css">
    <link rel="stylesheet" href="./CSS/main.css">
    <link rel="stylesheet" href="./bootstrap-4.5.2-dist/css/bootstrap.min.css">
   
    <script src="JavaScript/jquery-3.5.1.min.js"></script>
    <script src="JavaScript/main.js"></script>

    <link rel="icon" href="./Imagem/panda-icon.png">
    <title>Cadastro</title>
</head>

<body>
    <!-- cadastro do cliente -->
     <a href="./Home.html"><i class="fa fa-chevron-circle-left seta_voltar" aria-hidden="true"></i></a>
    <form id="form_cadastro" method="post" onsubmit="return cadastrar()">
        <img src="./Imagem/usuario-removebg-preview-removebg-preview__1_-removebg-preview.png" alt="">CADASTRO
        <div id="div_formulario" class="form-group">
            <label for="exampleInputName1">Nome Completo</label><br>
            <input type="text" name="nome" id="exampleInputName1" class="nome rounded-pill">
        </div>
        <div class="form-group">
            <label for="exampleInputEmail1">Endereço de Email</label><br>
            <input type="email" name="login" class="rounded-pill" id="exampleInputEmail1" >
            <small id="emailHelp" class="form-text text-muted">Nunca compartilhe seu email e senha.</small>
          </div>
          
        <div class=" form-group">
            <label for="cep">CEP</label><br>
            <input type="text" name="cep" class="rounded-pill" id="cep1" required: minlength="8">
            <button type="button" class="btn button btn-outline-info my-sm-1"
            onclick="consultaCep()">Consultar</button>        
        </div>
            <div class="form-group" >  
                <label for="logradouro">Logradouro</label><br>     
                <input type="text" class="rounded-pill" name="logradouro">
            </div>
            <div class="form-group" >  
                <label for="numero">Número</label><br>     
                <input type="text" class="rounded-pill" name="numero">
            </div>
            <div class="form-group">
                <label for="bairro">Bairro</label><br>
                <input type="text" class="rounded-pill" name="bairro">
            </div>
            <div class="form-group">
                <label for="cidade">Cidade</label><br>
                <input type="text" class="rounded-pill" name="cidade">
            </div>
        </div>
         <div class="form-group">
          <label for="exampleInputPassword1">Senha</label><br>
          <input type="password" name="senha" class="rounded-pill" id="exampleInputPassword1">
        </div>
        <button id="btn_entrar"class="btn align-middle btn-outline-info my-sm-1">Cadastrar</button>
    </form>
        <!-- SETA INDICANDO VOLTAR LADO ESQUERDO NA DIV AZUL MARINHO TOPO -->

   

    <div id="div_erro" style="background-color: sandybrown; color: maroon; display: none;">
        Erro no cadastro
    </div>
</body>

</html>
<script>

    function cadastrar() {
        var formulario = new URLSearchParams(new FormData(form_cadastro));
        fetch("/usuarios/cadastrar", {
            method: "POST",
            body: formulario
        }).then(function (response) {

            if (response.ok) {

                window.location.href = 'login.html';

            } else {

                console.log('Erro de cadastro!');
                response.text().then(function (resposta) {
                    div_erro.innerHTML = resposta;
                });
                finalizar_aguardar();
            }
        });

        return false;
    }
    function finalizar_aguardar() {
        btn_entrar.disabled = false;
        div_erro.style.display = 'block';
    }

</script>