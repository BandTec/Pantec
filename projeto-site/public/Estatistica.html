<!doctype html>
<html>

<head>
    <title>Line Chart</title>
    <script src="https://www.chartjs.org/dist/2.9.3/Chart.min.js"></script>
    <script src="https://www.chartjs.org/samples/latest/utils.js"></script>
    <script type="text/javascript" src="https://www.google.com/jsapi"></script>
    <link rel="stylesheet" href="./CSS/Estilo_sieg_graficos.css">
    <link rel="icon" href="./Imagem/engrenagem.jpg">
    <link rel="stylesheet" href="./CSS/main.css">
    <link rel="stylesheet" href="./CSS/Estilo_menu_sieg.css">
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script src="./JavaScript/Funções-menu-sieg.js"></script>
</head>

<body onload="atualizarGraficoOne(), atualizarGraficoTwo(), atualizarGraficoTree(), atualizarGraficoFour(), atualizarGraficoFive(), atualizarGraficoSix(), atualizarGraficoSeven(), atualizarGraficoHeigth(), atualizarGraficoNine()">
    <div class="caixa_menu">
       
            
        <nav class="caixa_nav">
         <i class="fa fa-bars" aria-hidden="true"></i>
            <ul>
                <li><a href="/PerfilSieg.html"><i class="fa fa-user-o" aria-hidden="true"></i> <span  class="local-menu"> Perfil</span></a></li>
                <li><a href="/Estatistica.html"><i class="fa fa-line-chart" aria-hidden="true"></i> <span class="local-menu"> Estatísticas</span> </a></li>
                <li><a href=""><i class="fa fa-history" aria-hidden="true"></i> <span class="local-menu"> Histórico</span></a></li>
                <li><a href=""><i class="fa fa-question-circle" aria-hidden="true"></i> <span class="local-menu"> Suporte</span></a></li>
                <li><a href=""><i class="fa fa-cog" aria-hidden="true"></i> <span class="local-menu"> Configuração</span></a></li>
                <li><a href="Login.html"><i class="fa fa-sign-out" aria-hidden="true"></i> <span class="local-menu"> Sair</span></a></li>
             
            </ul>
        </nav>
     </div> 
   
   
     <div class="div-logo"><label class="sieg">SIEG SYSTEM</label></div>
   <br>
    <center>
        <form style="display: none; color: white; margin-top: 10%;" id="form_cadastro" enctype=application/json method="post" name="formuser" onchange="return validar()">
            
            Id Login:
            <div style="display: none;" id="data" name="data"></div>
            <input type="text" name="inp" id="inp" style="margin-bottom: 1.5%;"><br>
            Usuario:
            <div style="display: none;" id="b_usuario" name="b_usuario"></div>
            <input type="text" name="usuario" id="usuario" style="margin-bottom: 1.5%;"><br>
            Hostname máquina:
            <select name="tentativa" id="tentativa">
                <option value="" disabled selected>Máquina</option>
            </select><br>
            Hostname máquina:
            <select name="segunda" id="segunda">
                <option value="" disabled selected>Máquina</option>
            </select>
        </form>
            <button id="but" style="margin-top: 10%;background-color: white; border: 2px black; border-radius: 5px; height: 25px; cursor: pointer;" onclick="validar()">
            Escolher máquina
            </button>
            <button onclick="validar()" id="btnPessoal" style="display: none; margin-top: 5%;background-color: white; border: 2px black; border-radius: 5px; height: 25px; cursor: pointer;">Máquina pessoal</button>
            <button onclick="discoComparacao()" id="btn1" style="display: none; margin-top: 5%;background-color: white; border: 2px black; border-radius: 5px; height: 25px; cursor: pointer;">Comparação disco</button>
            <button onclick="memComparacao()" id="btn2" style="display: none; background-color: white; border: 2px black; border-radius: 5px; height: 25px; cursor: pointer;">Comparação memória</button>
            <button onclick="cpuComparacao()" id="btn3" style="display: none; background-color: white; border: 2px black; border-radius: 5px; height: 25px; cursor: pointer;">Comparação cpu</button>
            <button onclick="todosComparacao()" id="btn4" style="display: none; background-color: white; border: 2px black; border-radius: 5px; height: 25px; cursor: pointer;">Comparação todos</button>
            <div id="graficosLine" style="width:75%; margin-top: 5%; display: none;">
                <div style="display: inline-block;" id="div_grafico_one">Dados sendo obtidos...</div>
                <div style="display: inline-block; margin-left: 100px;" id="div_grafico_two">Dados sendo obtidos...</div>
            </div>
            <div id="graficosColumn" style="width:75%; margin-top: 50px; display: none;">
                <div style="display: inline-block;" id="div_grafico_tree">Dados sendo obtidos...</div>
                <div style="display: inline-block; margin-left: 100px;" id="div_grafico_four">Dados sendo obtidos...</div>
            </div>
            <div style="margin-left: 100px; display: none; margin-top: 5%; margin-bottom: 5%;" id="div_grafico_five">Dados sendo obtidos...</div>
            <div style="margin-left: 100px; display: none; margin-top: 5%; margin-bottom: 5%;" id="div_grafico_six">Dados sendo obtidos...</div>
            <div style="margin-left: 100px; display: none; margin-top: 5%; margin-bottom: 5%;" id="div_grafico_seven">Dados sendo obtidos...</div>
            <div style="margin-left: 100px; display: none; margin-top: 5%; margin-bottom: 5%;" id="div_grafico_heigth">Dados sendo obtidos...</div>
            <div style="margin-left: 100px; display: none; margin-top: 5%; margin-bottom: 5%;" id="div_grafico_nine">Dados sendo obtidos...</div>
        </center>
        
        <script>
        function cpuComparacao(){
            document.getElementById('div_grafico_six').style.display="block";
            document.getElementById('btnPessoal').style.display="inline-block";
            document.getElementById('div_grafico_seven').style.display="none";
            document.getElementById('div_grafico_nine').style.display="none";
            document.getElementById('graficosLine').style.display="none";
            document.getElementById('div_grafico_heigth').style.display="none";
            document.getElementById('graficosColumn').style.display="none";
        }

        function todosComparacao(){
            document.getElementById('btnPessoal').style.display="inline-block";
            document.getElementById('div_grafico_six').style.display="none";
            document.getElementById('div_grafico_heigth').style.display="none";
            document.getElementById('div_grafico_seven').style.display="block";
            document.getElementById('div_grafico_nine').style.display="none";
            document.getElementById('div_grafico_five').style.display="none";
            document.getElementById('graficosLine').style.display="none";
            document.getElementById('graficosColumn').style.display="none";
        }

        function discoComparacao(){
            document.getElementById('div_grafico_six').style.display="none";
            document.getElementById('div_grafico_heigth').style.display="block";
            document.getElementById('div_grafico_seven').style.display="none";
            document.getElementById('div_grafico_five').style.display="none";
            document.getElementById('btnPessoal').style.display="inline-block";
            document.getElementById('graficosLine').style.display="none";
            document.getElementById('div_grafico_nine').style.display="none";
            document.getElementById('graficosColumn').style.display="none";
        }

        function memComparacao(){
            document.getElementById('div_grafico_nine').style.display="block";
            document.getElementById('div_grafico_six').style.display="none";
            document.getElementById('div_grafico_heigth').style.display="none";
            document.getElementById('div_grafico_seven').style.display="none";
            document.getElementById('div_grafico_five').style.display="none";
            document.getElementById('graficosLine').style.display="none";
            document.getElementById('btnPessoal').style.display="inline-block";
            document.getElementById('graficosColumn').style.display="none";
        }

        function verificar_autenticacao() {
            login_usuario = sessionStorage.login_usuario_meuapp;
            
            if (login_usuario == undefined)  {
                console.log("Deu ruim")
            } else {
                b_usuario.innerHTML = login_usuario;
            }
            
        }
        verificar_autenticacao()

        function validar() {
        document.getElementById('btnPessoal').style.display="none";
        document.getElementById('div_grafico_six').style.display="none";
        document.getElementById('div_grafico_heigth').style.display="none";
        document.getElementById('div_grafico_seven').style.display="none";
        document.getElementById('div_grafico_nine').style.display="none";
        document.getElementById('graficosColumn').style.display="block";
        document.getElementById('graficosLine').style.display="block";
        document.getElementById('div_grafico_five').style.display="block";  
        document.getElementById('form_cadastro').style.display="block";
        document.getElementById('btn1').style.display="inline-block";
        document.getElementById('btn2').style.display="inline-block";
        document.getElementById('btn3').style.display="inline-block";
        document.getElementById('btn4').style.display="inline-block";
        
        document.getElementById('but').style.display="none";
        document.getElementById('data').innerHTML = sessionStorage.getItem('id');
        document.querySelector("[name='inp']").value = document.getElementById('data').innerText
        document.querySelector("[name='usuario']").value = document.getElementById('b_usuario').innerText
        console.log("OLHE AQUI "+tentativa.value)

        var formulario = new URLSearchParams(new FormData(form_cadastro));
        fetch("/leituras/enviar", {
            method: "POST",
            body: formulario
        }).then(function (response) {
            if (response.ok) {

               console.log('foi')

            } else {
                console.log('Erro de cadastro!');
            }
        });
            if(tentativa.value==""){
                console.log('f')
                select()
            }
            if(segunda.value==""){
                console.log('f')
                selectTwo()
            }
        return false;
    }

    var colorOne='#E74C3C';
    var colorTwo='#E74C3C';
    var colorTree='#E74C3C';
    var colorFour='#E74C3C';
    var cpu=0;
    var mem=0;
    var disco=0;
    var gpu=0;
    var processos=0;
    var temperatura=0;
    var cpu_two=0;
    var mem_two=0;
    var disco_two=0;
        google.load('visualization', '1', {
            packages: ['corechart', 'SteppedArea'],
            callback: obterDadosGraficoOne
        });
        function atualizarGraficoOne() {
            obterDadosGraficoOne();
            setTimeout(atualizarGraficoOne, 5000);
        }
        function configurarGraficoOne() {
            var altura = 250;
            var largura = 400;
            var configuracoes = {
                tooltip: {
                    isHtml: true
                },
                trendlines: {
                    0: {
                        labelInLegend: 'uso'
                    }
                },
                title: 'CPU',
                legend: { position: 'bottom',
                textStyle: { color: 'white'} },
                colors: [colorOne],
                areaOpacity:0.8,
                isStacked: true,
                width: largura,
                titleTextStyle:{color:'white'},
                height: altura,
                vAxis: {
                    textStyle: {
                        fontSize: 12,
                        color: 'white'
                    },
                    titleTextStyle:{color:'white'}
                },
                hAxis: {
                    slantedTextAngle: 45,
                    textStyle: {
                        fontSize: 10,
                        color: 'white'
                    },
                    titleTextStyle:{color:'white'}
                },
                chartArea: {
                    left: 30,
                    top: 20,
                    width: (largura - 10),
                    height: (altura - 90)
                },
                backgroundColor:'black'
            };

            return configuracoes;
        }
        function obterDadosGraficoOne() {
            var dados = new google.visualization.DataTable();
            dados.addColumn('string', 'Momento');
            dados.addColumn('number', 'Uso');

            fetch('/leituras/cpu', { cache: 'no-store' }).then(function (response) {
                if (response.ok) {
                    response.json().then(function (resposta) {

                        console.log(`Dados recebidos: ${JSON.stringify(dados)}`);

                        resposta.reverse();

                        for (i = 0; i < resposta.length; i++) {
                            var registro = resposta[i];
                            dados.addRow([
                                registro.momento,
                                registro.uso
                            ]);
                            if(registro.uso<72){
                                colorOne="#547D92"
                            }
                            cpu=registro.uso;
                        }
                        console.log(registro.uso, colorOne)
                        plotarGraficoOne(dados);
                    });
                } else {
                    console.error('Nenhum dado encontrado ou erro na API');
                }
            })
                .catch(function (error) {
                    console.error(`Erro na obtenção dos dados p/ gráfico: ${error.message}`);
                });

        }

        function plotarGraficoOne(dados) {
            console.log('iniciando plotagem do gráfico...');

            var chart = new google.visualization.SteppedAreaChart(div_grafico_one);
            chart.draw(dados, configurarGraficoOne());
        }
        google.load('visualization', '1', {
            packages: ['corechart', 'SteppedArea'],
            callback: obterDadosGraficoTwo
        });
        function atualizarGraficoTwo() {
            obterDadosGraficoTwo();
            setTimeout(atualizarGraficoTwo, 5000);
        }

        function configurarGraficoTwo() {
            var altura = 250;
            var largura = 400;
            var configuracoes = {
                tooltip: {
                    isHtml: true
                },
                trendlines: {
                    0: {
                        labelInLegend: 'uso'
                    }
                },
                title: 'Disco',
                legend: { position: 'bottom',
                textStyle: { color: 'white'} },
                colors: ['#bd9cbd', colorTwo],
                isStacked: true,
                width: largura,
                titleTextStyle:{color:'white'},
                height: altura,
                vAxis: {
                    textStyle: {
                        fontSize: 12
                    },
                    titleTextStyle:{color:'white'}
                },
                hAxis: {
                    slantedTextAngle: 45,
                    textStyle: {
                        fontSize: 10
                    },
                    titleTextStyle:{color:'white'}
                },
                chartArea: {
                    left: 30,
                    top: 20,
                    width: (largura - 10),
                    height: (altura - 90)
                },
                pieHole:0.4,
                pieSliceTextStyle: {
                    color: 'black',
          },
          backgroundColor:'black'
            };

            return configuracoes;
        }

        function obterDadosGraficoTwo() {

            fetch('/leituras/disco', { cache: 'no-store' }).then(function (response) {
                if (response.ok) {
                    response.json().then(function (resposta) {

                        console.log(`Dados recebidos: ${JSON.stringify(dados)}`);

                        resposta.reverse();
                        
                        for (i = 0; i < resposta.length; i++) {
                            var registro = resposta[i];
                            var dados = new google.visualization.arrayToDataTable([
                                ['Total', 'Hours'],
                                [registro.momento, registro.uso],
                                ['Total livre',(100-registro.uso)]]);
                        if (registro.uso<50){
                            colorTwo='#547D92'
                        }
                        mem=registro.uso;
                    }
                        
                        plotarGraficoTwo(dados);
                    });
                } else {
                    console.error('Nenhum dado encontrado ou erro na API');
                }
            })
                .catch(function (error) {
                    console.error(`Erro na obtenção dos dados p/ gráfico: ${error.message}`);
                });

        }

        function plotarGraficoTwo(dados) {
            console.log('iniciando plotagem do gráfico...');

            var chart = new google.visualization.PieChart(div_grafico_two);
            chart.draw(dados, configurarGraficoTwo());
        }

        google.load('visualization', '1', {
            packages: ['corechart', 'SteppedArea'],
            callback: obterDadosGraficoTree
        });

        function atualizarGraficoTree() {
            obterDadosGraficoTree();
            setTimeout(atualizarGraficoTree, 5000);
        }

        function configurarGraficoTree() {
            var altura = 250;
            var largura = 400;
            var configuracoes = {
                tooltip: {
                    isHtml: true
                },
                trendlines: {
                    0: {
                        labelInLegend: 'uso'
                    }
                },
                title: 'Memória',
                legend: { position: 'bottom',
                textStyle: { color: 'white'} },
                titleTextStyle:{color:'white'},
                colors: [colorTree, '#bd9cbd'],
                isStacked: true,
                width: largura,
                height: altura,
                vAxis: {
                    textStyle: {
                        fontSize: 12,
                        color: 'white'
                    },
                    titleTextStyle:{color:'white'}
                },
                hAxis: {
                    slantedTextAngle: 45,
                    textStyle: {
                        fontSize: 10,
                        color: 'white'
                    },
                    titleTextStyle:{color:'white'}
                },
                chartArea: {
                    left: 30,
                    top: 20,
                    width: (largura - 10),
                    height: (altura - 90)
                },
                pieHole:0.4,
                pieSliceTextStyle: {
                    color: 'black',
          },
          backgroundColor:'black'
            };

            return configuracoes;
        }


        function obterDadosGraficoTree() {


            fetch('/leituras/mem', { cache: 'no-store' }).then(function (response) {
                if (response.ok) {
                    response.json().then(function (resposta) {

                        console.log(`Dados recebidos: ${JSON.stringify(dados)}`);

                        resposta.reverse();
                        
                        for (i = 0; i < resposta.length; i++) {
                            var registro = resposta[i];
                            var teste='2020-11-25T00:09:10.227Z'
                            var dados = new google.visualization.arrayToDataTable([
                                ['Total', 'Hours'],
                                ['Total usado', registro.uso],
                                ['Total livre',(100-registro.uso)]]);
                            if(registro.uso<75){
                                colorTree='#547D92';
                            }
                            disco=registro.uso;
                        }
                        plotarGraficoTree(dados);
                    });
                } else {
                    console.error('Nenhum dado encontrado ou erro na API');
                }
            })
                .catch(function (error) {
                    console.error(`Erro na obtenção dos dados p/ gráfico: ${error.message}`);
                });

        }

        function plotarGraficoTree(dados) {
            console.log('iniciando plotagem do gráfico...');

            var chart = new google.visualization.PieChart(div_grafico_tree);
            chart.draw(dados, configurarGraficoTree());
        }
        google.load('visualization', '1', {
            packages: ['corechart', 'SteppedArea'],
            callback: obterDadosGraficoFour
        });
        function atualizarGraficoFour() {
            obterDadosGraficoFour();
            setTimeout(atualizarGraficoFour, 5000);
        }

        function configurarGraficoFour() {
            var altura = 250;
            var largura = 400;
            var configuracoes = {
                tooltip: {
                    isHtml: true
                },
                trendlines: {
                    0: {
                        labelInLegend: 'uso'
                    }
                },
                title: 'GPU',
                legend: { position: 'bottom',
                textStyle: { color: 'white'} },
                colors: [colorFour],
                titleTextStyle:{color:'white'},
                isStacked: true,
                width: largura,
                height: altura,
                vAxis: {
                    textStyle: {
                        fontSize: 12,
                        color: 'white'
                    },
                titleTextStyle:{color:'white'}
                },
                hAxis: {
                    slantedTextAngle: 45,
                    textStyle: {
                        fontSize: 10,
                        color: 'white'
                    },
                titleTextStyle:{color:'white'}
                },
                chartArea: {
                    left: 30,
                    top: 20,
                    width: (largura - 10),
                    height: (altura - 90)
                },
                backgroundColor:'black'
            };

            return configuracoes;
        }

        function obterDadosGraficoFour() {
            var dados = new google.visualization.DataTable();
            dados.addColumn('string', 'Momento');
            dados.addColumn('number', 'Temperatura'+" °C");

            fetch('/leituras/gpu', { cache: 'no-store' }).then(function (response) {
                if (response.ok) {
                    response.json().then(function (resposta) {

                        console.log(`Dados recebidos: ${JSON.stringify(dados)}`);

                        resposta.reverse();

                        for (i = 0; i < resposta.length; i++) {
                            var registro = resposta[i];
                            dados.addRow([
                                registro.momento,
                                registro.uso
                            ]);
                            if(registro.uso<80){
                                colorFour='#547D92';
                            }
                            gpu=registro.uso;
                        }

                        plotarGraficoFour(dados);
                    });
                } else {
                    console.error('Nenhum dado encontrado ou erro na API');
                }
            })
                .catch(function (error) {
                    console.error(`Erro na obtenção dos dados p/ gráfico: ${error.message}`);
                });

        }

        function plotarGraficoFour(dados) {
            console.log('iniciando plotagem do gráfico...');

            var chart = new google.visualization.SteppedAreaChart(div_grafico_four);
            chart.draw(dados, configurarGraficoFour());
        }
        function select(){
            fetch('leituras/select',{ cache: 'no-store' }).then(function (response) {
                if (response.ok) {
                    response.json().then(function (resposta) {

                        console.log(`Dados TESTE: ${JSON.stringify(resposta)}`);
                        const vetor=[];
                       
                            resposta.map(resposta => {
                                console.log(resposta.hostname)
                                vetor.push(resposta.hostname)
                            });
                            
                            const languagesSelect = document.getElementById("tentativa");
                        vetor.forEach((language) => {
                        option = new Option(language, language.toLowerCase());
                        languagesSelect.options[languagesSelect.options.length] = option;
                        });
                        x = languagesSelect.value;
                        console.log("VETOR TESTE: "+vetor)
                        
                })
            }})
            .catch((error)=>{
                console.log(error)
            })
        }
        function selectTwo(){
            fetch('leituras/select',{ cache: 'no-store' }).then(function (response) {
                if (response.ok) {
                    response.json().then(function (resposta) {

                        console.log(`Dados TESTE: ${JSON.stringify(resposta)}`);
                        const vetor=[];
                       
                            resposta.map(resposta => {
                                console.log(resposta.hostname)
                                vetor.push(resposta.hostname)
                            });
                            
                            const langsSelect = document.getElementById("segunda");
                        vetor.forEach((language) => {
                        option = new Option(language, language.toLowerCase());
                        langsSelect.options[langsSelect.options.length] = option;
                        });
                        x = langsSelect.value;
                        console.log("VETOR TESTE: "+vetor)
                        
                })
            }})
            .catch((error)=>{
                console.log(error)
            })
        }
        function atualizarSelect() {
            select();
            setTimeout(atualizarSelect,5000);
        }

        google.load('visualization', '1', {
            packages: ['corechart', 'line'],
            callback: obterDadosGraficoFive
        });
        function atualizarGraficoFive() {
            obterDadosGraficoFive();
            setTimeout(atualizarGraficoFive, 5000);
        }
        function configurarGraficoFive() {
            var altura = 250;
            var largura = 600;
            var configuracoes = {
                legend: { position: 'bottom',
                textStyle: { color: 'white'} },
                width: largura,
                height: altura,
                title : 'Processos',
                titleTextStyle:{color:'white'},
                chartArea: {
                    left: 50,
                    top: 20,
                    right:20,
                    width: (largura - 10),
                    height: (altura - 90)
                },
                vAxis: {title: 'Uso',
                textStyle: { color: 'white'},
                titleTextStyle:{color:'white'}},
                hAxis: {title: 'Momento',
                textStyle: { color: 'white'},
                titleTextStyle:{color:'white'}},
                seriesType: 'bars',
                series: {5: {type: 'line'}},
                backgroundColor:'black'
            };

            return configuracoes;
        }
        function obterDadosGraficoFive() {
            fetch('/leituras/processos', { cache: 'no-store' }).then(function (response) {
                if (response.ok) {
                    response.json().then(function (resposta) {

                        console.log(`Dados recebidos: ${JSON.stringify(dados)}`);

                        resposta.reverse();
                            var dados =new google.visualization.arrayToDataTable([
                                ['Hora','CPU','Mem','Disco','Gpu','Processos','Temperatura CPU'],
                                [resposta[0].momento,cpu, mem, disco, gpu, resposta[0].processos, resposta[0].uso],
                                [resposta[1].momento,cpu, mem, disco, gpu, resposta[1].processos,resposta[1].uso],
                                [resposta[2].momento,cpu, mem, disco, gpu, resposta[2].processos,resposta[2].uso],
                                
                            ]);
                            processos=resposta[0].processos;
                            temperatura=resposta[0].uso;
                        console.log("OLHA PARA MIM "+resposta[0].processos)
                        plotarGraficoFive(dados);
                    });
                } else {
                    console.error('Nenhum dado encontrado ou erro na API');
                }
            })
                .catch(function (error) {
                    console.error(`Erro na obtenção dos dados p/ gráfico: ${error.message}`);
                });

        }

        function plotarGraficoFive(dados) {
            console.log('iniciando plotagem do gráfico...');

            var chart = new google.visualization.ComboChart(div_grafico_five);
            chart.draw(dados, configurarGraficoFive());
        }


        google.load('visualization', '1', {
            packages: ['corechart', 'column'],
            callback: obterDadosGraficoSix
        });
        function atualizarGraficoSix() {
            obterDadosGraficoSix();
            setTimeout(atualizarGraficoSix, 5000);
        }
        function configurarGraficoSix() {
            var altura = 250;
            var largura = 600;
            var configuracoes = {
                legend: { position: 'bottom',
                textStyle: { color: 'white'} },
                width: largura,
                height: altura,
                title : 'Comparação CPU',
                titleTextStyle:{color:'white'},
                chartArea: {
                    left: 50,
                    top: 20,
                    right:20,
                    width: (largura - 10),
                    height: (altura - 90)
                },
                vAxis: {title: 'Uso',
                textStyle: { color: 'white'},
                titleTextStyle:{color:'white'}},
                hAxis: {title: 'Momento',
                textStyle: { color: 'white'},
                titleTextStyle:{color:'white'}},
                colors: ['#547D92','white'],
                backgroundColor:'black'
            };

            return configuracoes;
        }
        function obterDadosGraficoSix() {
            fetch('/leituras/comparacao', { cache: 'no-store' }).then(function (response) {
                if (response.ok) {
                    response.json().then(function (resposta) {

                        console.log(`Dados recebidos: ${JSON.stringify(dados)}`);

                        resposta.reverse();
                            var dados =new google.visualization.arrayToDataTable([
                                ['Hora','CPU','CPU 2'],
                                [resposta[0].momento,cpu,resposta[0].uso],
                                [resposta[1].momento,cpu,resposta[1].uso],
                                [resposta[2].momento,cpu,resposta[2].uso],
                            ]);
                        console.log("OLHA PARA ISTO "+resposta[0].uso)
                        cpu_two=resposta[0].uso;
                        plotarGraficoSix(dados);
                    });
                } else {
                    console.error('Nenhum dado encontrado ou erro na API');
                }
            })
                .catch(function (error) {
                    console.error(`Erro na obtenção dos dados p/ gráfico: ${error.message}`);
                });

        }

        function plotarGraficoSix(dados) {
            console.log('iniciando plotagem do gráfico...');

            var chart = new google.visualization.ColumnChart(div_grafico_six);
            chart.draw(dados, configurarGraficoSix());
        }

        google.load('visualization', '1', {
            packages: ['corechart', 'line'],
            callback: obterDadosGraficoSeven
        });
        function atualizarGraficoSeven() {
            obterDadosGraficoSeven();
            setTimeout(atualizarGraficoSeven, 5000);
        }
        function configurarGraficoSeven() {
            var altura = 350;
            var largura = 1000;
            var configuracoes = {
                legend: { position: 'bottom',
                textStyle: { color: 'white'} },
                width: largura,
                height: altura,
                title : 'Processos',
                titleTextStyle:{color:'white'},
                chartArea: {
                    left: 50,
                    top: 20,
                    right:20,
                    width: (largura - 10),
                    height: (altura - 90)
                },
                vAxis: {title: 'Uso',
                textStyle: { color: 'white'},
                titleTextStyle:{color:'white'}},
                hAxis: {title: 'Momento',
                textStyle: { color: 'white'},
                titleTextStyle:{color:'white'}},
                seriesType: 'bars',
                series: {5: {type: 'line'},
                        7: {type: 'line'}},
                backgroundColor:'black'
            };

            return configuracoes;
        }
        function obterDadosGraficoSeven() {
            fetch('/leituras/processos-duo', { cache: 'no-store' }).then(function (response) {
                if (response.ok) {
                    response.json().then(function (resposta) {

                        console.log(`Dados recebidos: ${JSON.stringify(dados)}`);

                        resposta.reverse();
                            var dados =new google.visualization.arrayToDataTable([
                                ['Hora','CPU','Mem','Disco','Gpu','Processos','Temperatura CPU', 'CPU 2','Temperatura CPU','Disco 2', 'Memória 2','Processos 2'],
                                [resposta[0].momento,cpu, mem, disco, gpu, processos, temperatura,resposta[0].uso, cpu_two, disco_two, mem_two,resposta[0].processos],
                                [resposta[1].momento,cpu, mem, disco, gpu, processos, temperatura,resposta[1].uso, cpu_two, disco_two, mem_two,resposta[1].processos],
                                [resposta[2].momento,cpu, mem, disco, gpu, processos, temperatura,resposta[2].uso, cpu_two, disco_two, mem_two,resposta[2].processos],
                                
                            ]);
                        console.log("OLHA PARA MIM "+resposta[0].processos)
                        plotarGraficoSeven(dados);
                    });
                } else {
                    console.error('Nenhum dado encontrado ou erro na API');
                }
            })
                .catch(function (error) {
                    console.error(`Erro na obtenção dos dados p/ gráfico: ${error.message}`);
                });

        }

        function plotarGraficoSeven(dados) {
            console.log('iniciando plotagem do gráfico...');

            var chart = new google.visualization.ComboChart(div_grafico_seven);
            chart.draw(dados, configurarGraficoSeven());
        }


        google.load('visualization', '1', {
            packages: ['corechart','column'],
            callback: obterDadosGraficoHeigth
        });
        function atualizarGraficoHeigth() {
            obterDadosGraficoHeigth();
            setTimeout(atualizarGraficoHeigth, 5000);
        }
        function configurarGraficoHeigth() {
            var altura = 250;
            var largura = 600;
            var configuracoes = {
                legend: { position: 'bottom',
                textStyle: { color: 'white'} },
                width: largura,
                height: altura,
                title : 'Comparação Disco',
                titleTextStyle:{color:'white'},
                chartArea: {
                    left: 50,
                    top: 20,
                    right:20,
                    width: (largura - 10),
                    height: (altura - 90)
                },
                vAxis: {title: 'Uso',
                textStyle: { color: 'white'},
                titleTextStyle:{color:'white'}},
                hAxis: {title: 'Momento',
                textStyle: { color: 'white'},
                titleTextStyle:{color:'white'}},
                colors: ['#547D92','white'],
                backgroundColor:'black'
            };

            return configuracoes;
        }
        function obterDadosGraficoHeigth() {
            fetch('/leituras/comparacao-disco', { cache: 'no-store' }).then(function (response) {
                if (response.ok) {
                    response.json().then(function (resposta) {

                        console.log(`Dados recebidos: ${JSON.stringify(dados)}`);

                        resposta.reverse();
                            var dados =new google.visualization.arrayToDataTable([
                                ['Hora','Disco','Disco 2'],
                                [resposta[0].momento,disco,resposta[0].uso],
                                [resposta[1].momento,disco,resposta[1].uso],
                                [resposta[2].momento,disco,resposta[2].uso],
                            ]);
                        console.log("OLHA PARA ISTO EU PRECISO DISSO "+resposta[0].uso+" "+ disco)
                        disco_two=resposta[0].uso;
                        plotarGraficoHeigth(dados);
                    });
                } else {
                    console.error('Nenhum dado encontrado ou erro na API');
                }
            })
                .catch(function (error) {
                    console.error(`Erro na obtenção dos dados p/ gráfico: ${error.message}`);
                });

        }

        function plotarGraficoHeigth(dados) {
            console.log('iniciando plotagem do gráfico...');

            var chart = new google.visualization.ColumnChart(div_grafico_heigth);
            chart.draw(dados, configurarGraficoHeigth());
        }

        google.load('visualization', '1', {
            packages: ['corechart', 'column'],
            callback: obterDadosGraficoNine
        });
        function atualizarGraficoNine() {
            obterDadosGraficoNine();
            setTimeout(atualizarGraficoNine, 5000);
        }
        function configurarGraficoNine() {
            var altura = 250;
            var largura = 600;
            var configuracoes = {
                legend: { position: 'bottom',
                colors: ['#547D92','white'],
                textStyle: { color: 'white'} },
                width: largura,
                height: altura,
                title : 'Comparação Disco',
                titleTextStyle:{color:'white'},
                chartArea: {
                    left: 50,
                    top: 20,
                    right:20,
                    width: (largura - 10),
                    height: (altura - 90)
                },
                vAxis: {title: 'Uso',
                textStyle: { color: 'white'},
                titleTextStyle:{color:'white'}},
                hAxis: {title: 'Momento',
                textStyle: { color: 'white'},
                titleTextStyle:{color:'white'}},
                colors: ['#547D92','white'],
                backgroundColor:'black'
            };

            return configuracoes;
        }
        function obterDadosGraficoNine() {
            fetch('/leituras/comparacao-mem', { cache: 'no-store' }).then(function (response) {
                if (response.ok) {
                    response.json().then(function (resposta) {

                        console.log(`Dados recebidos: ${JSON.stringify(dados)}`);

                        resposta.reverse();
                            var dados =new google.visualization.arrayToDataTable([
                                ['Hora','Memória','Memória 2'],
                                [resposta[0].momento,mem,resposta[0].uso],
                                [resposta[1].momento,mem,resposta[1].uso],
                                [resposta[2].momento,mem,resposta[2].uso],
                            ]);
                        console.log("OLHA PARA ISTO É SÉRIO "+resposta[0].uso+" "+ resposta[0].momento)
                        mem_two=resposta[0].uso;
                        plotarGraficoNine(dados);
                    });
                } else {
                    console.error('Nenhum dado encontrado ou erro na API');
                }
            })
                .catch(function (error) {
                    console.error(`Erro na obtenção dos dados p/ gráfico: ${error.message}`);
                });

        }

        function plotarGraficoNine(dados) {
            console.log('iniciando plotagem do gráfico...');

            var chart = new google.visualization.ColumnChart(div_grafico_nine);
            chart.draw(dados, configurarGraficoNine());
        }
    </script>
</body>

</html>